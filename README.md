消息获取策略：
A. 一次性全部拉取所有会话的所有消息
你现在的代码是：getConversationMessages(userId)，一次性拉取所有会话的所有消息。
优点：实现简单，前端直接拿到所有数据，切换会话时无需再请求。
缺点：消息量大时，首屏加载慢、流量大、内存占用高，体验差。
B. 只拉取会话列表，不拉取消息，点开会话时再拉取该会话的消息（懒加载）
先只请求会话列表，用户点开某个会话时，才请求该会话的消息。
优点：首屏快，流量小，体验好。
缺点：首次点开某个会话时有短暂加载延迟。
C. 只拉取每个会话的最新一条消息，点开会话时再拉取历史消息
会话列表接口返回每个会话的最新一条消息（用于预览），点开会话时再分页拉取历史消息。
优点：首屏快，能展示最新消息预览，体验好。
缺点：实现稍复杂，需要分页/懒加载。
D. 分页/增量拉取消息
每次只拉取一部分（如最新20条），用户上拉/下拉时再加载更多历史消息。
适合消息量很大的场景。
2. 推荐的标准方案（主流 IM/微信/QQ 都是这样做的）
会话列表接口：只返回会话基本信息+最新一条消息（用于预览）
会话消息接口：点开会话时，分页拉取该会话的消息（如最新20条）
历史消息：用户上拉时再分页加载更多历史消息
新消息推送：通过 WebSocket/轮询等方式实时推送新消息